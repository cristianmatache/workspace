<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{{ tenant_name }}'s Viewings</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Montserrat:400,600,700"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.3.1/css/all.css"
    />
    {%assets "scss_all" %}
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static',filename='index-tenant.css') }}"
    />
    {% endassets %}
  </head>

  <script
    type="text/javascript"
    src="http://code.jquery.com/jquery-1.7.1.min.js"
  ></script>

  <body>
    <!--<p>Upcoming</p>-->
    <!--{{ upcoming }}-->

    <!--<p>Not Confirmed</p>-->
    <!--{{ not_confirmed }}-->

    <!--<p>Viewed</p>-->
    <!--{{ viewed }}-->

    <!--<p>Already rejected</p>-->
    <!--{{ declined }}-->

    <!-- partial:index.partial.html -->
    <div class="wrapper flat-name page-title">
      <span>IQOR</span>
    </div>
    <div class="wrapper flat-name user-name">
      <span>{{ tenant_name }}</span>
    </div>
    <div class="wrapper flat-name user-buttons">
      <!--    <div class="button user-button">Bio</div>-->
      <!--    <div class="button user-button">View</div>-->
      <div class="button user-button" onclick="redirectHome({{ tenant_id }})">
        Homepage
      </div>
    </div>

    <div class="header-upcoming wrapper">
      <h2>Upcoming Viewings</h2>
    </div>
    <div class="wrapper">
      {% if upcoming_empty %} {% for flatId, tenantId, viewed, declined,
      viewingDate, viewingConfirmed, tenantName, tenantEmail, tenantPhone, age,
      employment, yearlyIncome, job, landlordId, postcode, bedrooms, bathrooms,
      area, flatName, rentPricePM, flatImage, landlordName, landlordEmail,
      landlordPhone, totalInterested, totalViewings, nUpInterested, nUpViewings
      in upcoming %}
      <div class="card">
        <input
          type="checkbox"
          id="card{{flatId}}"
          class="more"
          aria-hidden="true"
        />

        <div class="content">
          <div class="front" style="background-image: url({{flatImage}})">
            <div class="inner">
              <div class="wrapper">
                <div class="info-front">
                  <span>{{bedrooms}} beds</span>
                  <div class="icon-front">
                    <i class="fas fa-bed"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{bathrooms}} baths</span>
                  <div class="icon-front">
                    <i class="fas fa-bath"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{rentPricePM}}€ PCM</span>
                  <div class="icon-front">
                    <i class="fas fa-money-bill"></i>
                  </div>
                </div>
              </div>

              <div class="flat-name">
                <h2>{{flatName}}</h2>
                <h2>{{viewingDate}}</h2>
              </div>

              <label for="card{{flatId}}" class="button" aria-hidden="true">
                Details
              </label>
            </div>
          </div>
          <div class="back">
            <div class="inner">
              <div class="info">
                <span>{{bedrooms+1}}</span>
                <div class="icon">
                  <i class="fas fa-door-open"></i>
                  <span>rooms</span>
                </div>
              </div>
              <div class="info">
                <span>{{bedrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bed"></i>
                  <span>beds</span>
                </div>
              </div>
              <div class="info">
                <span>{{bathrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bath"></i>
                  <span>baths</span>
                </div>
              </div>
              <div class="info">
                <span>{{area}}</span>
                <div class="icon">
                  <i class="fas fa-layer-group"></i>
                  <span>sqm</span>
                </div>
              </div>
              <div class="description">
                <p>{{flatName}}</p>
                <p># competitors interested: {{nUpInterested}}</p>
                <p># competitors' viewings: {{nUpViewings}}</p>
                <label
                  for="card{{flatId}}"
                  class="button return cancel"
                  onclick="cancelViewing({{flatId}}, {{tenantId}}, '{{viewingDate}}')"
                  >Cancel</label
                >
              </div>
              <div class="location">postcode: {{postcode}}</div>
              <div class="price">{{rentPricePM}} €/month</div>
              <label
                for="card{{flatId}}"
                class="button return"
                aria-hidden="true"
              >
                <i class="fas fa-arrow-left"></i>
              </label>
            </div>
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <h3>No upcoming viewings.</h3>
      {% endif %}
    </div>

    <div class="header-upcoming wrapper">
      <h2>Not Confirmed Viewings</h2>
    </div>
    <div class="wrapper">
      {% if not_conf_empty %} {% for flatId, tenantId, viewed, declined,
      viewingDate, viewingConfirmed, tenantName, tenantEmail, tenantPhone, age,
      employment, yearlyIncome, job, landlordId, postcode, bedrooms, bathrooms,
      area, flatName, rentPricePM, flatImage, landlordName, landlordEmail,
      landlordPhone, totalInterested, totalViewings, nUpInterested, nUpViewings
      in not_confirmed %}
      <div class="card">
        <input
          type="checkbox"
          id="card2{{flatId}}"
          class="more"
          aria-hidden="true"
        />

        <div class="content">
          <div class="front" style="background-image: url({{flatImage}})">
            <div class="inner">
              <div class="wrapper">
                <div class="info-front">
                  <span>{{bedrooms}} beds</span>
                  <div class="icon-front">
                    <i class="fas fa-bed"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{bathrooms}} baths</span>
                  <div class="icon-front">
                    <i class="fas fa-bath"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{rentPricePM}}€ PCM</span>
                  <div class="icon-front">
                    <i class="fas fa-money-bill"></i>
                  </div>
                </div>
              </div>

              <div class="flat-name">
                <h2>{{flatName}}</h2>
                <h2>{{viewingDate}}</h2>
              </div>

              <label for="card2{{flatId}}" class="button" aria-hidden="true">
                Details
              </label>
            </div>
          </div>
          <div class="back">
            <div class="inner">
              <div class="info">
                <span>{{bedrooms+1}}</span>
                <div class="icon">
                  <i class="fas fa-door-open"></i>
                  <span>rooms</span>
                </div>
              </div>
              <div class="info">
                <span>{{bedrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bed"></i>
                  <span>beds</span>
                </div>
              </div>
              <div class="info">
                <span>{{bathrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bath"></i>
                  <span>baths</span>
                </div>
              </div>
              <div class="info">
                <span>{{area}}</span>
                <div class="icon">
                  <i class="fas fa-layer-group"></i>
                  <span>sqm</span>
                </div>
              </div>
              <div class="description">
                <p>{{flatName}}</p>
                <p># competitors interested: {{nUpInterested}}</p>
                <p># competitors' viewings: {{nUpViewings}}</p>
                <label
                  for="card{{flatId}}"
                  class="button return cancel"
                  onclick="cancelViewing({{flatId}}, {{tenantId}}, '{{viewingDate}}')"
                  >Cancel</label
                >
              </div>
              <div class="location">postcode: {{postcode}}</div>
              <div class="price">{{rentPricePM}} €/month</div>
              <label
                for="card2{{flatId}}"
                class="button return"
                aria-hidden="true"
              >
                <i class="fas fa-arrow-left"></i>
              </label>
            </div>
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <h3>No viewings proposed for approval.</h3>
      {% endif %}
    </div>

    <div class="header-upcoming wrapper">
      <h2>Viewed Flats</h2>
    </div>
    <div class="wrapper">
      {% if viewed_empty %} {% for flatId, tenantId, viewed, declined,
      viewingDate, viewingConfirmed, tenantName, tenantEmail, tenantPhone, age,
      employment, yearlyIncome, job, landlordId, postcode, bedrooms, bathrooms,
      area, flatName, rentPricePM, flatImage, landlordName, landlordEmail,
      landlordPhone, totalInterested, totalViewings, nUpInterested, nUpViewings
      in viewed %}
      <div class="card">
        <input
          type="checkbox"
          id="card3{{flatId}}"
          class="more"
          aria-hidden="true"
        />

        <div class="content">
          <div class="front" style="background-image: url({{flatImage}})">
            <div class="inner">
              <div class="wrapper">
                <div class="info-front">
                  <span>{{bedrooms}} beds</span>
                  <div class="icon-front">
                    <i class="fas fa-bed"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{bathrooms}} baths</span>
                  <div class="icon-front">
                    <i class="fas fa-bath"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{rentPricePM}}€ PCM</span>
                  <div class="icon-front">
                    <i class="fas fa-money-bill"></i>
                  </div>
                </div>
              </div>

              <div class="flat-name">
                <h2>{{flatName}}</h2>
                <h2>{{viewingDate}}</h2>
              </div>

              <label for="card3{{flatId}}" class="button" aria-hidden="true">
                Details
              </label>
            </div>
          </div>
          <div class="back">
            <div class="inner">
              <div class="info">
                <span>{{bedrooms+1}}</span>
                <div class="icon">
                  <i class="fas fa-door-open"></i>
                  <span>rooms</span>
                </div>
              </div>
              <div class="info">
                <span>{{bedrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bed"></i>
                  <span>beds</span>
                </div>
              </div>
              <div class="info">
                <span>{{bathrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bath"></i>
                  <span>baths</span>
                </div>
              </div>
              <div class="info">
                <span>{{area}}</span>
                <div class="icon">
                  <i class="fas fa-layer-group"></i>
                  <span>sqm</span>
                </div>
              </div>
              <div class="description">
                <p>{{flatName}}</p>
                <p># competitors interested: {{nUpInterested}}</p>
                <p># competitors' viewings: {{nUpViewings}}</p>
                <!--                            <label for=card class="button return">Schedule a viewing</label>-->
              </div>
              <div class="location">postcode: {{postcode}}</div>
              <div class="price">{{rentPricePM}} €/month</div>
              <label
                for="card3{{flatId}}"
                class="button return"
                aria-hidden="true"
              >
                <i class="fas fa-arrow-left"></i>
              </label>
            </div>
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <h3>No viewed flats.</h3>
      {% endif %}
    </div>
    <div class="header-upcoming wrapper">
      <h2>Declined</h2>
    </div>
    <div class="wrapper">
      {% if declined_empty %} {% for flatId, tenantId, viewed, declined,
      viewingDate, viewingConfirmed, tenantName, tenantEmail, tenantPhone, age,
      employment, yearlyIncome, job, landlordId, postcode, bedrooms, bathrooms,
      area, flatName, rentPricePM, flatImage, landlordName, landlordEmail,
      landlordPhone, totalInterested, totalViewings, nUpInterested, nUpViewings
      in declined %}
      <div class="card">
        <input
          type="checkbox"
          id="card4{{flatId}}"
          class="more"
          aria-hidden="true"
        />

        <div class="content">
          <div class="front" style="background-image: url({{flatImage}})">
            <div class="inner">
              <div class="wrapper">
                <div class="info-front">
                  <span>{{bedrooms}} beds</span>
                  <div class="icon-front">
                    <i class="fas fa-bed"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{bathrooms}} baths</span>
                  <div class="icon-front">
                    <i class="fas fa-bath"></i>
                  </div>
                </div>
                <div class="info-front">
                  <span>{{rentPricePM}}€ PCM</span>
                  <div class="icon-front">
                    <i class="fas fa-money-bill"></i>
                  </div>
                </div>
              </div>

              <div class="flat-name">
                <h2>{{flatName}}</h2>
                <h2>{{viewingDate}}</h2>
              </div>

              <label for="card4{{flatId}}" class="button" aria-hidden="true">
                Details
              </label>
            </div>
          </div>
          <div class="back">
            <div class="inner">
              <div class="info">
                <span>{{bedrooms+1}}</span>
                <div class="icon">
                  <i class="fas fa-door-open"></i>
                  <span>rooms</span>
                </div>
              </div>
              <div class="info">
                <span>{{bedrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bed"></i>
                  <span>beds</span>
                </div>
              </div>
              <div class="info">
                <span>{{bathrooms}}</span>
                <div class="icon">
                  <i class="fas fa-bath"></i>
                  <span>baths</span>
                </div>
              </div>
              <div class="info">
                <span>{{area}}</span>
                <div class="icon">
                  <i class="fas fa-layer-group"></i>
                  <span>sqm</span>
                </div>
              </div>
              <div class="description">
                <p>{{flatName}}</p>
                <p># competitors interested: {{nUpInterested}}</p>
                <p># competitors' viewings: {{nUpViewings}}</p>
                <!--                            <label for=card class="button return">Schedule a viewing</label>-->
              </div>
              <div class="location">postcode: {{postcode}}</div>
              <div class="price">{{rentPricePM}} €/month</div>
              <label
                for="card4{{flatId}}"
                class="button return"
                aria-hidden="true"
              >
                <i class="fas fa-arrow-left"></i>
              </label>
            </div>
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <h3>No declined flats.</h3>
      {% endif %}
    </div>

    <!-- partial -->
  </body>

  <script>
    function redirectHome(tenantId) {
      var redirect = `/get-homepage-tenant/${tenantId}`;
      $.get(redirect, function () {
        window.location(redirect);
      });
    }

    function cancelViewing(flatId, tenantId, viewingDate) {
      var redirect = `/cancel-viewing-tenant/${flatId}/${tenantId}/${viewingDate}`;
      console.log(redirect);
      $.get(redirect, function () {
        window.location(redirect);
      });
    }
  </script>
</html>
